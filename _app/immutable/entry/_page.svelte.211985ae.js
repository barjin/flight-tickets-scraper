import{S as T,i as q,s as I,e as F,b as y,E,h as p,K as G,k as b,q as m,l as k,m as D,r as g,D as _,a as M,c as O,u as N,L as J,M as Q,g as R,d as A,J as V,N as W,O as X,v as Y,f as $,P as ee,Q as te,y as U,z,A as B,R as re,T as ae,B as H,U as ne,n as S,C as ce}from"../chunks/index.8f30a14a.js";import{w as le}from"../chunks/index.279f0557.js";function se(o){let e,a;return{c(){e=b("p"),a=m("Loading currency rates...")},l(r){e=k(r,"P",{});var t=D(e);a=g(t,"Loading currency rates..."),t.forEach(p)},m(r,t){y(r,e,t),_(e,a)},p:E,d(r){r&&p(e)}}}function oe(o){let e,a,r,t,c,n,l=Math.ceil(o[2]*o[5].CZK)+"",i,f,u,s,h=new Date(o[3]).toLocaleDateString()+"",w,L,C=new Date(o[4]).toLocaleDateString()+"",P;return{c(){e=b("div"),a=b("h3"),r=m(o[1]),t=m(" ("),c=m(o[0]),n=m(") - "),i=m(l),f=m(" CZK"),u=M(),s=b("p"),w=m(h),L=m(" - "),P=m(C)},l(d){e=k(d,"DIV",{});var v=D(e);a=k(v,"H3",{});var j=D(a);r=g(j,o[1]),t=g(j," ("),c=g(j,o[0]),n=g(j,") - "),i=g(j,l),f=g(j," CZK"),j.forEach(p),u=O(v),s=k(v,"P",{});var K=D(s);w=g(K,h),L=g(K," - "),P=g(K,C),K.forEach(p),v.forEach(p)},m(d,v){y(d,e,v),_(e,a),_(a,r),_(a,t),_(a,c),_(a,n),_(a,i),_(a,f),_(e,u),_(e,s),_(s,w),_(s,L),_(s,P)},p(d,v){v&2&&N(r,d[1]),v&1&&N(c,d[0]),v&36&&l!==(l=Math.ceil(d[2]*d[5].CZK)+"")&&N(i,l),v&8&&h!==(h=new Date(d[3]).toLocaleDateString()+"")&&N(w,h),v&16&&C!==(C=new Date(d[4]).toLocaleDateString()+"")&&N(P,C)},d(d){d&&p(e)}}}function ie(o){let e;function a(c,n){return c[5]?oe:se}let r=a(o),t=r(o);return{c(){t.c(),e=F()},l(c){t.l(c),e=F()},m(c,n){t.m(c,n),y(c,e,n)},p(c,[n]){r===(r=a(c))&&t?t.p(c,n):(t.d(1),t=r(c),t&&(t.c(),t.m(e.parentNode,e)))},i:E,o:E,d(c){t.d(c),c&&p(e)}}}function ue(o,e,a){let{airport:r}=e,{city:t}=e,{price:c}=e,{departureDate:n}=e,{returnDate:l}=e,{distance:i}=e,f;return G("currencyRates").subscribe(s=>{a(5,f=s)}),o.$$set=s=>{"airport"in s&&a(0,r=s.airport),"city"in s&&a(1,t=s.city),"price"in s&&a(2,c=s.price),"departureDate"in s&&a(3,n=s.departureDate),"returnDate"in s&&a(4,l=s.returnDate),"distance"in s&&a(6,i=s.distance)},[r,t,c,n,l,f,i]}class fe extends T{constructor(e){super(),q(this,e,ue,ie,I,{airport:0,city:1,price:2,departureDate:3,returnDate:4,distance:6})}}function Z(o,e,a){const r=o.slice();return r[4]=e[a],r}function _e(o){let e,a;return{c(){e=b("p"),a=m("An error occurred!")},l(r){e=k(r,"P",{});var t=D(e);a=g(t,"An error occurred!"),t.forEach(p)},m(r,t){y(r,e,t),_(e,a)},p:E,i:E,o:E,d(r){r&&p(e)}}}function pe(o){let e,a,r=o[3].slice(0,10),t=[];for(let n=0;n<r.length;n+=1)t[n]=x(Z(o,r,n));const c=n=>A(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=F()},l(n){for(let l=0;l<t.length;l+=1)t[l].l(n);e=F()},m(n,l){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(n,l);y(n,e,l),a=!0},p(n,l){if(l&2){r=n[3].slice(0,10);let i;for(i=0;i<r.length;i+=1){const f=Z(n,r,i);t[i]?(t[i].p(f,l),R(t[i],1)):(t[i]=x(f),t[i].c(),R(t[i],1),t[i].m(e.parentNode,e))}for(Y(),i=r.length;i<t.length;i+=1)c(i);$()}},i(n){if(!a){for(let l=0;l<r.length;l+=1)R(t[l]);a=!0}},o(n){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)A(t[l]);a=!1},d(n){ee(t,n),n&&p(e)}}}function x(o){let e,a;const r=[o[4]];let t={};for(let c=0;c<r.length;c+=1)t=te(t,r[c]);return e=new fe({props:t}),{c(){U(e.$$.fragment)},l(c){z(e.$$.fragment,c)},m(c,n){B(e,c,n),a=!0},p(c,n){const l=n&2?re(r,[ae(c[4])]):{};e.$set(l)},i(c){a||(R(e.$$.fragment,c),a=!0)},o(c){A(e.$$.fragment,c),a=!1},d(c){H(e,c)}}}function he(o){let e,a;return{c(){e=b("p"),a=m("Loading data...")},l(r){e=k(r,"P",{});var t=D(e);a=g(t,"Loading data..."),t.forEach(p)},m(r,t){y(r,e,t),_(e,a)},p:E,i:E,o:E,d(r){r&&p(e)}}}function de(o){let e,a,r=new Date().toLocaleDateString()+"",t,c,n,l,i,f={ctx:o,current:null,token:null,hasCatch:!0,pending:he,then:pe,catch:_e,value:3,error:7,blocks:[,,,]};return J(o[1],f),{c(){e=b("pre"),a=m("Last update at "),t=m(r),c=m(", 00:00"),n=M(),l=F(),f.block.c()},l(u){e=k(u,"PRE",{});var s=D(e);a=g(s,"Last update at "),t=g(s,r),c=g(s,", 00:00"),s.forEach(p),n=O(u),l=F(),f.block.l(u)},m(u,s){y(u,e,s),_(e,a),_(e,t),_(e,c),y(u,n,s),y(u,l,s),f.block.m(u,f.anchor=s),f.mount=()=>l.parentNode,f.anchor=l,i=!0},p(u,[s]){o=u,Q(f,o,s)},i(u){i||(R(f.block),i=!0)},o(u){for(let s=0;s<3;s+=1){const h=f.blocks[s];A(h)}i=!1},d(u){u&&p(e),u&&p(n),u&&p(l),f.block.d(u),f.token=null,f=null}}}const me="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/recent.json",ge="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/currency.json";function be(o){return o.filter(e=>e.flightprices.length>0).map(e=>{const a=e.flightprices.sort((r,t)=>r.price-t.price)[0];return{city:`${e.e} ${e.label}`,airport:e.iata,price:a.price,departureDate:a.dateFrom,returnDate:a.dateTo,distance:e.distance}}).sort((e,a)=>e.price-a.price)}function ke(o,e,a){let r,t=le(null);V(o,t,n=>a(2,r=n)),W("currencyRates",t);const c=(async()=>{const l=await(await fetch(me)).json();return be(l)})();return(async()=>{const l=await(await fetch(ge)).json();X(t,r=l.rates,r)})(),[t,c]}class ve extends T{constructor(e){super(),q(this,e,ke,de,I,{})}}function De(o){let e,a,r,t,c,n,l,i,f,u,s;return u=new ve({}),{c(){e=b("meta"),a=M(),r=b("section"),t=b("h1"),c=b("span"),n=b("picture"),l=b("img"),f=M(),U(u.$$.fragment),this.h()},l(h){const w=ne("svelte-hut9iq",document.head);e=k(w,"META",{name:!0,content:!0}),w.forEach(p),a=O(h),r=k(h,"SECTION",{class:!0});var L=D(r);t=k(L,"H1",{class:!0});var C=D(t);c=k(C,"SPAN",{class:!0});var P=D(c);n=k(P,"PICTURE",{});var d=D(n);l=k(d,"IMG",{src:!0,alt:!0,class:!0}),d.forEach(p),P.forEach(p),C.forEach(p),f=O(L),z(u.$$.fragment,L),L.forEach(p),this.h()},h(){document.title="✈️  FreeFlight",S(e,"name","description"),S(e,"content","Flight ticket scraper"),ce(l.src,i="./logo.svg")||S(l,"src",i),S(l,"alt","FreeFlight"),S(l,"class","svelte-19xx0bt"),S(c,"class","welcome svelte-19xx0bt"),S(t,"class","svelte-19xx0bt"),S(r,"class","svelte-19xx0bt")},m(h,w){_(document.head,e),y(h,a,w),y(h,r,w),_(r,t),_(t,c),_(c,n),_(n,l),_(r,f),B(u,r,null),s=!0},p:E,i(h){s||(R(u.$$.fragment,h),s=!0)},o(h){A(u.$$.fragment,h),s=!1},d(h){p(e),h&&p(a),h&&p(r),H(u)}}}class Ee extends T{constructor(e){super(),q(this,e,null,De,I,{})}}export{Ee as default};
