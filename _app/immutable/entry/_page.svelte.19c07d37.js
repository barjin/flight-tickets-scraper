import{S as ue,i as fe,s as _e,e as ne,b as T,E as C,h as u,K as Ce,k as d,q as w,l as p,m as b,r as x,D as i,L as re,a as V,c as R,p as X,n as E,u as te,M as oe,N as Se,O as he,P as de,Q as ie,g as le,d as ae,R as Ae,J as Pe,T as Ie,U as Le,V as Te,W as we,v as Oe,f as Ne,X as je,y as xe,z as Ee,A as ye,Y as Fe,Z as Ve,B as De,_ as Re,C as Be}from"../chunks/index.b9fa93af.js";import{w as Ue}from"../chunks/index.53f01c12.js";function Ke(r){let e,l;return{c(){e=d("p"),l=w("Loading currency rates...")},l(n){e=p(n,"P",{});var t=b(e);l=x(t,"Loading currency rates..."),t.forEach(u)},m(n,t){T(n,e,t),i(e,l)},p:C,d(n){n&&u(e)}}}function Ze(r){let e,l,n,t,s,a,c,o,S,P,y,I=Math.ceil(r[2]*r[5].CZK)+"",_,m,f,h,k,L,Z,F=r[6]>1?"days":"day",q,O,M=new Date(r[3]).toLocaleDateString()+"",z,B,U=new Date(r[4]).toLocaleDateString()+"",G,J,$,D,A,g,v={ctx:r,current:null,token:null,hasCatch:!1,pending:ze,then:Me,catch:qe,value:7};return re(r[7],v),{c(){e=d("div"),l=d("div"),n=d("span"),t=d("span"),s=d("h3"),a=w(r[1]),c=w(" ("),o=w(r[0]),S=w(")"),P=V(),y=d("b"),_=w(I),m=w(" CZK"),f=V(),h=d("span"),k=d("b"),L=w(r[6]),Z=V(),q=w(F),O=w(`
            (`),z=w(M),B=w(" - "),G=w(U),J=w(")"),$=V(),D=d("div"),v.block.c(),A=V(),g=d("div"),this.h()},l(N){e=p(N,"DIV",{class:!0});var j=b(e);l=p(j,"DIV",{style:!0});var H=b(l);n=p(H,"SPAN",{});var Q=b(n);t=p(Q,"SPAN",{style:!0});var W=b(t);s=p(W,"H3",{});var Y=b(s);a=x(Y,r[1]),c=x(Y," ("),o=x(Y,r[0]),S=x(Y,")"),Y.forEach(u),P=R(W),y=p(W,"B",{style:!0});var ee=b(y);_=x(ee,I),m=x(ee," CZK"),ee.forEach(u),W.forEach(u),Q.forEach(u),f=R(H),h=p(H,"SPAN",{});var K=b(h);k=p(K,"B",{});var se=b(k);L=x(se,r[6]),Z=R(se),q=x(se,F),se.forEach(u),O=x(K,`
            (`),z=x(K,M),B=x(K," - "),G=x(K,U),J=x(K,")"),K.forEach(u),H.forEach(u),$=R(j),D=p(j,"DIV",{class:!0});var ce=b(D);v.block.l(ce),A=R(ce),g=p(ce,"DIV",{class:!0}),b(g).forEach(u),ce.forEach(u),j.forEach(u),this.h()},h(){X(y,"font-size","120%"),X(t,"display","flex"),X(t,"flex-direction","row"),X(t,"justify-content","space-between"),X(t,"width","100%"),X(t,"align-items","center"),X(l,"flex","1"),E(g,"class","button calendar svelte-1x8jv0l"),E(D,"class","button-holder svelte-1x8jv0l"),E(e,"class","offer svelte-1x8jv0l")},m(N,j){T(N,e,j),i(e,l),i(l,n),i(n,t),i(t,s),i(s,a),i(s,c),i(s,o),i(s,S),i(t,P),i(t,y),i(y,_),i(y,m),i(l,f),i(l,h),i(h,k),i(k,L),i(k,Z),i(k,q),i(h,O),i(h,z),i(h,B),i(h,G),i(h,J),i(e,$),i(e,D),v.block.m(D,v.anchor=null),v.mount=()=>D,v.anchor=A,i(D,A),i(D,g)},p(N,j){r=N,j&2&&te(a,r[1]),j&1&&te(o,r[0]),j&36&&I!==(I=Math.ceil(r[2]*r[5].CZK)+"")&&te(_,I),j&8&&M!==(M=new Date(r[3]).toLocaleDateString()+"")&&te(z,M),j&16&&U!==(U=new Date(r[4]).toLocaleDateString()+"")&&te(G,U),oe(v,r,j)},d(N){N&&u(e),v.block.d(),v.token=null,v=null}}}function qe(r){return{c:C,l:C,m:C,p:C,d:C}}function Me(r){let e;return{c(){e=d("a"),this.h()},l(l){e=p(l,"A",{href:!0,class:!0,target:!0});var n=b(e);n.forEach(u),this.h()},h(){E(e,"href",r[7]),E(e,"class","button flight svelte-1x8jv0l"),E(e,"target","_blank")},m(l,n){T(l,e,n)},p:C,d(l){l&&u(e)}}}function ze(r){let e;return{c(){e=d("div"),this.h()},l(l){e=p(l,"DIV",{class:!0}),b(e).forEach(u),this.h()},h(){E(e,"class","button flight svelte-1x8jv0l")},m(l,n){T(l,e,n)},p:C,d(l){l&&u(e)}}}function Ge(r){let e;function l(s,a){return s[5]?Ze:Ke}let n=l(r),t=n(r);return{c(){t.c(),e=ne()},l(s){t.l(s),e=ne()},m(s,a){t.m(s,a),T(s,e,a)},p(s,[a]){n===(n=l(s))&&t?t.p(s,a):(t.d(1),t=n(s),t&&(t.c(),t.m(e.parentNode,e)))},i:C,o:C,d(s){t.d(s),s&&u(e)}}}function He(r,e,l){let{airport:n}=e,{city:t}=e,{price:s}=e,{departureDate:a}=e,{returnDate:c}=e,{distance:o}=e,S,P=(async()=>{const _=async Z=>(await new Promise(q=>{const O=new FileReader;O.onload=()=>q(O.result),O.readAsDataURL(new Blob([Z]))})).split(",",2)[1],m=n,f=new Date(a),h=new Date(c),k=[8,28,16,2,26,35,106,12,8,2,18,8,47,109,47,48,53,121,119,103,18,10,...new TextEncoder().encode(f.toISOString().split("T")[0]),114,7,8,1,18,3,...new TextEncoder().encode(m),26,35,106,7,8,1,18,3,...new TextEncoder().encode(m),18,10,...new TextEncoder().encode(h.toISOString().split("T")[0]),114,12,8,2,18,8,47,109,47,48,53,121,119,103,112,1,130,1,11,8];return`https://www.google.com/travel/flights/search?tfs=${await _(new Uint8Array(k))}____________AUABSAGYAQE`})();Ce("currencyRates").subscribe(_=>{l(5,S=_)});const I=(new Date(c)-new Date(a))/(1e3*60*60*24);return r.$$set=_=>{"airport"in _&&l(0,n=_.airport),"city"in _&&l(1,t=_.city),"price"in _&&l(2,s=_.price),"departureDate"in _&&l(3,a=_.departureDate),"returnDate"in _&&l(4,c=_.returnDate),"distance"in _&&l(8,o=_.distance)},[n,t,s,a,c,S,I,P,o]}class Qe extends ue{constructor(e){super(),fe(this,e,He,Ge,_e,{airport:0,city:1,price:2,departureDate:3,returnDate:4,distance:8})}}function pe(r,e,l){const n=r.slice();return n[11]=e[l],n}function ve(r,e,l){const n=r.slice();return n[15]=e[l],n}function Ye(r){return{c:C,l:C,m:C,p:C,d:C}}function Je(r){let e,l=r[2].slice(0,5).map(ge).filter(ke),n=[];for(let t=0;t<l.length;t+=1)n[t]=me(ve(r,l,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=ne()},l(t){for(let s=0;s<n.length;s+=1)n[s].l(t);e=ne()},m(t,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,s);T(t,e,s)},p(t,s){if(s&6){l=t[2].slice(0,5).map(ge).filter(ke);let a;for(a=0;a<l.length;a+=1){const c=ve(t,l,a);n[a]?n[a].p(c,s):(n[a]=me(c),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=l.length}},d(t){we(n,t),t&&u(e)}}}function me(r){let e,l=r[15]+"",n,t,s;function a(){return r[6](r[15])}return{c(){e=d("button"),n=w(l),this.h()},l(c){e=p(c,"BUTTON",{class:!0});var o=b(e);n=x(o,l),o.forEach(u),this.h()},h(){E(e,"class","svelte-416n5v")},m(c,o){T(c,e,o),i(e,n),t||(s=ie(e,"click",a),t=!0)},p(c,o){r=c,o&4&&l!==(l=r[15]+"")&&te(n,l)},d(c){c&&u(e),t=!1,s()}}}function We(r){let e;return{c(){e=d("div")},l(l){e=p(l,"DIV",{}),b(e).forEach(u)},m(l,n){T(l,e,n)},p:C,d(l){l&&u(e)}}}function Xe(r){let e,l;return{c(){e=d("p"),l=w("An error occurred!")},l(n){e=p(n,"P",{});var t=b(e);l=x(t,"An error occurred!"),t.forEach(u)},m(n,t){T(n,e,t),i(e,l)},p:C,i:C,o:C,d(n){n&&u(e)}}}function $e(r){let e,l,n=r[4](r[2],r[0]).slice(0,10),t=[];for(let a=0;a<n.length;a+=1)t[a]=be(pe(r,n,a));const s=a=>ae(t[a],1,1,()=>{t[a]=null});return{c(){e=d("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=p(a,"DIV",{style:!0});var c=b(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(u),this.h()},h(){E(e,"style","display: flex; flex-direction: column; width")},m(a,c){T(a,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);l=!0},p(a,c){if(c&21){n=a[4](a[2],a[0]).slice(0,10);let o;for(o=0;o<n.length;o+=1){const S=pe(a,n,o);t[o]?(t[o].p(S,c),le(t[o],1)):(t[o]=be(S),t[o].c(),le(t[o],1),t[o].m(e,null))}for(Oe(),o=n.length;o<t.length;o+=1)s(o);Ne()}},i(a){if(!l){for(let c=0;c<n.length;c+=1)le(t[c]);l=!0}},o(a){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)ae(t[c]);l=!1},d(a){a&&u(e),we(t,a)}}}function be(r){let e,l;const n=[r[11]];let t={};for(let s=0;s<n.length;s+=1)t=je(t,n[s]);return e=new Qe({props:t}),{c(){xe(e.$$.fragment)},l(s){Ee(e.$$.fragment,s)},m(s,a){ye(e,s,a),l=!0},p(s,a){const c=a&21?Fe(n,[Ve(s[11])]):{};e.$set(c)},i(s){l||(le(e.$$.fragment,s),l=!0)},o(s){ae(e.$$.fragment,s),l=!1},d(s){De(e,s)}}}function et(r){let e,l;return{c(){e=d("p"),l=w("Loading data...")},l(n){e=p(n,"P",{});var t=b(e);l=x(t,"Loading data..."),t.forEach(u)},m(n,t){T(n,e,t),i(e,l)},p:C,i:C,o:C,d(n){n&&u(e)}}}function tt(r){let e,l,n=new Date().toLocaleDateString()+"",t,s,a,c,o,S,P,y,I,_,m,f,h,k,L,Z,F,q,O,M,z,B,U,G,J,$,D={ctx:r,current:null,token:null,hasCatch:!1,pending:We,then:Je,catch:Ye,value:2};re(y=r[2],D);let A={ctx:r,current:null,token:null,hasCatch:!0,pending:et,then:$e,catch:Xe,value:2,error:14,blocks:[,,,]};return re(U=r[2],A),{c(){e=d("pre"),l=w("Last update at "),t=w(n),s=w(", 00:00"),a=V(),c=d("div"),o=d("input"),S=V(),P=d("div"),D.block.c(),I=V(),_=d("div"),m=w(`Sort by: 
		`),f=d("select"),h=d("option"),k=w("Price"),L=d("option"),Z=w("Price for km"),F=d("option"),q=w("Closest"),O=d("option"),M=w("Furthest"),z=V(),B=ne(),A.block.c(),this.h()},l(g){e=p(g,"PRE",{});var v=b(e);l=x(v,"Last update at "),t=x(v,n),s=x(v,", 00:00"),v.forEach(u),a=R(g),c=p(g,"DIV",{class:!0});var N=b(c);o=p(N,"INPUT",{placeholder:!0,class:!0}),S=R(N),P=p(N,"DIV",{class:!0});var j=b(P);D.block.l(j),j.forEach(u),I=R(N),_=p(N,"DIV",{class:!0});var H=b(_);m=x(H,`Sort by: 
		`),f=p(H,"SELECT",{});var Q=b(f);h=p(Q,"OPTION",{});var W=b(h);k=x(W,"Price"),W.forEach(u),L=p(Q,"OPTION",{});var Y=b(L);Z=x(Y,"Price for km"),Y.forEach(u),F=p(Q,"OPTION",{});var ee=b(F);q=x(ee,"Closest"),ee.forEach(u),O=p(Q,"OPTION",{});var K=b(O);M=x(K,"Furthest"),K.forEach(u),Q.forEach(u),H.forEach(u),N.forEach(u),z=R(g),B=ne(),A.block.l(g),this.h()},h(){E(o,"placeholder","Search..."),E(o,"class","svelte-416n5v"),E(P,"class","country-buttons svelte-416n5v"),h.__value="price",h.value=h.__value,L.__value="priceforkm",L.value=L.__value,F.__value="distance",F.value=F.__value,O.__value="distance_des",O.value=O.__value,r[0]===void 0&&Se(()=>r[7].call(f)),E(_,"class","svelte-416n5v"),E(c,"class","inputs svelte-416n5v")},m(g,v){T(g,e,v),i(e,l),i(e,t),i(e,s),T(g,a,v),T(g,c,v),i(c,o),he(o,r[1]),i(c,S),i(c,P),D.block.m(P,D.anchor=null),D.mount=()=>P,D.anchor=null,i(c,I),i(c,_),i(_,m),i(_,f),i(f,h),i(h,k),i(f,L),i(L,Z),i(f,F),i(F,q),i(f,O),i(O,M),de(f,r[0],!0),T(g,z,v),T(g,B,v),A.block.m(g,A.anchor=v),A.mount=()=>B.parentNode,A.anchor=B,G=!0,J||($=[ie(o,"input",r[5]),ie(f,"change",r[7])],J=!0)},p(g,[v]){r=g,v&2&&o.value!==r[1]&&he(o,r[1]),D.ctx=r,v&4&&y!==(y=r[2])&&re(y,D)||oe(D,r,v),v&1&&de(f,r[0]),A.ctx=r,v&4&&U!==(U=r[2])&&re(U,A)||oe(A,r,v)},i(g){G||(le(A.block),G=!0)},o(g){for(let v=0;v<3;v+=1){const N=A.blocks[v];ae(N)}G=!1},d(g){g&&u(e),g&&u(a),g&&u(c),D.block.d(),D.token=null,D=null,g&&u(z),g&&u(B),A.block.d(g),A.token=null,A=null,J=!1,Ae($)}}}const lt="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/recent.json",nt="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/currency.json",ge=r=>r.e,ke=(r,e,l)=>l.findIndex(n=>n===r)===e;function rt(r,e,l){let n;function t(m){return m.filter(f=>f.flightprices.length>0).map(f=>{const h=f.flightprices.sort((k,L)=>k.price-L.price)[0];return{city:`${f.e} ${f.label}`,airport:f.iata,price:h.price,departureDate:h.dateFrom,returnDate:h.dateTo,distance:f.distance,e:f.e}})}let s=Promise.resolve([]),a="price",c="",o=Ue(null);Pe(r,o,m=>l(8,n=m)),Ie("currencyRates",o);function S(m,f){if(f==="price")return m.sort((h,k)=>h.price-k.price);if(f==="distance")return m.sort((h,k)=>h.distance-k.distance);if(f==="priceforkm")return m.sort((h,k)=>h.price/h.distance-k.price/k.distance);if(f==="distance_des")return m.sort((h,k)=>k.distance-h.distance)}let P=(async()=>{const f=await(await fetch(lt)).json();return S(t(f),a)})();(async()=>{const f=await(await fetch(nt)).json();Le(o,n=f.rates,n)})();function y(){c=this.value,l(1,c)}const I=m=>{l(1,c=m)};function _(){a=Te(this),l(0,a)}return r.$$.update=()=>{r.$$.dirty&3&&l(2,s=P.then(m=>S(c?m.filter(f=>f.city.toLowerCase().includes(c.toLowerCase())||f.airport.toLowerCase().includes(c.toLowerCase())||f.e.toLowerCase().includes(c.toLowerCase())):m,a)))},[a,c,s,o,S,y,I,_]}class at extends ue{constructor(e){super(),fe(this,e,rt,tt,_e,{})}}function st(r){let e,l,n,t,s,a,c,o,S,P,y,I;return y=new at({}),{c(){e=d("meta"),l=d("meta"),n=V(),t=d("section"),s=d("h1"),a=d("span"),c=d("picture"),o=d("img"),P=V(),xe(y.$$.fragment),this.h()},l(_){const m=Re("svelte-i9o7bw",document.head);e=p(m,"META",{name:!0,content:!0}),l=p(m,"META",{name:!0,content:!0}),m.forEach(u),n=R(_),t=p(_,"SECTION",{class:!0});var f=b(t);s=p(f,"H1",{class:!0});var h=b(s);a=p(h,"SPAN",{class:!0});var k=b(a);c=p(k,"PICTURE",{});var L=b(c);o=p(L,"IMG",{src:!0,alt:!0,class:!0}),L.forEach(u),k.forEach(u),h.forEach(u),P=R(f),Ee(y.$$.fragment,f),f.forEach(u),this.h()},h(){document.title="✈️  FreeFlight",E(e,"name","description"),E(e,"content","Flight ticket scraper"),E(l,"name","viewport"),E(l,"content","width=device-width, initial-scale=0.8, user-scalable=no, minimum-scale=0.8, maximum-scale=0.8"),Be(o.src,S="./logo.svg")||E(o,"src",S),E(o,"alt","FreeFlight"),E(o,"class","svelte-19xx0bt"),E(a,"class","welcome svelte-19xx0bt"),E(s,"class","svelte-19xx0bt"),E(t,"class","svelte-19xx0bt")},m(_,m){i(document.head,e),i(document.head,l),T(_,n,m),T(_,t,m),i(t,s),i(s,a),i(a,c),i(c,o),i(t,P),ye(y,t,null),I=!0},p:C,i(_){I||(le(y.$$.fragment,_),I=!0)},o(_){ae(y.$$.fragment,_),I=!1},d(_){u(e),u(l),_&&u(n),_&&u(t),De(y)}}}class it extends ue{constructor(e){super(),fe(this,e,null,st,_e,{})}}export{it as default};
