import{S as se,i as ce,s as oe,e as ee,b as A,E as w,h as u,K as ge,k as p,q as g,l as m,m as b,r as x,D as i,L as _e,a as T,c as F,p as z,n as v,u as q,M as he,g as N,d as G,J as xe,N as ve,O as we,v as ye,f as ke,P as De,Q as Ee,y as de,z as pe,A as me,R as Ae,T as Se,B as be,U as Ce,C as Le}from"../chunks/index.8f30a14a.js";import{w as Pe}from"../chunks/index.279f0557.js";function Te(s){let e,r;return{c(){e=p("p"),r=g("Loading currency rates...")},l(a){e=m(a,"P",{});var t=b(e);r=x(t,"Loading currency rates..."),t.forEach(u)},m(a,t){A(a,e,t),i(e,r)},p:w,d(a){a&&u(e)}}}function Fe(s){let e,r,a,t,l,n,o,c,d,h,_,k=Math.ceil(s[2]*s[5].CZK)+"",f,D,L,y,S,I,B,te=s[6]>1?"days":"day",M,O,U=new Date(s[3]).toLocaleDateString()+"",H,re,V=new Date(s[4]).toLocaleDateString()+"",Q,ae,ne,P,J,K,C={ctx:s,current:null,token:null,hasCatch:!1,pending:Re,then:Oe,catch:Ie,value:7};return _e(s[7],C),{c(){e=p("div"),r=p("div"),a=p("span"),t=p("span"),l=p("h3"),n=g(s[1]),o=g(" ("),c=g(s[0]),d=g(")"),h=T(),_=p("b"),f=g(k),D=g(" CZK"),L=T(),y=p("span"),S=p("b"),I=g(s[6]),B=T(),M=g(te),O=g(`
            (`),H=g(U),re=g(" - "),Q=g(V),ae=g(")"),ne=T(),P=p("div"),C.block.c(),J=T(),K=p("div"),this.h()},l(R){e=m(R,"DIV",{class:!0});var E=b(e);r=m(E,"DIV",{style:!0});var Y=b(r);a=m(Y,"SPAN",{});var ie=b(a);t=m(ie,"SPAN",{style:!0});var W=b(t);l=m(W,"H3",{});var Z=b(l);n=x(Z,s[1]),o=x(Z," ("),c=x(Z,s[0]),d=x(Z,")"),Z.forEach(u),h=F(W),_=m(W,"B",{style:!0});var le=b(_);f=x(le,k),D=x(le," CZK"),le.forEach(u),W.forEach(u),ie.forEach(u),L=F(Y),y=m(Y,"SPAN",{});var j=b(y);S=m(j,"B",{});var X=b(S);I=x(X,s[6]),B=F(X),M=x(X,te),X.forEach(u),O=x(j,`
            (`),H=x(j,U),re=x(j," - "),Q=x(j,V),ae=x(j,")"),j.forEach(u),Y.forEach(u),ne=F(E),P=m(E,"DIV",{class:!0});var $=b(P);C.block.l($),J=F($),K=m($,"DIV",{class:!0}),b(K).forEach(u),$.forEach(u),E.forEach(u),this.h()},h(){z(_,"font-size","120%"),z(t,"display","flex"),z(t,"flex-direction","row"),z(t,"justify-content","space-between"),z(t,"width","100%"),z(t,"align-items","center"),z(r,"flex","1"),v(K,"class","button calendar svelte-1gwuzlo"),v(P,"class","button-holder svelte-1gwuzlo"),v(e,"class","offer svelte-1gwuzlo")},m(R,E){A(R,e,E),i(e,r),i(r,a),i(a,t),i(t,l),i(l,n),i(l,o),i(l,c),i(l,d),i(t,h),i(t,_),i(_,f),i(_,D),i(r,L),i(r,y),i(y,S),i(S,I),i(S,B),i(S,M),i(y,O),i(y,H),i(y,re),i(y,Q),i(y,ae),i(e,ne),i(e,P),C.block.m(P,C.anchor=null),C.mount=()=>P,C.anchor=J,i(P,J),i(P,K)},p(R,E){s=R,E&2&&q(n,s[1]),E&1&&q(c,s[0]),E&36&&k!==(k=Math.ceil(s[2]*s[5].CZK)+"")&&q(f,k),E&8&&U!==(U=new Date(s[3]).toLocaleDateString()+"")&&q(H,U),E&16&&V!==(V=new Date(s[4]).toLocaleDateString()+"")&&q(Q,V),he(C,s,E)},d(R){R&&u(e),C.block.d(),C.token=null,C=null}}}function Ie(s){return{c:w,l:w,m:w,p:w,d:w}}function Oe(s){let e;return{c(){e=p("a"),this.h()},l(r){e=m(r,"A",{href:!0,class:!0,target:!0});var a=b(e);a.forEach(u),this.h()},h(){v(e,"href",s[7]),v(e,"class","button flight svelte-1gwuzlo"),v(e,"target","_blank")},m(r,a){A(r,e,a)},p:w,d(r){r&&u(e)}}}function Re(s){let e;return{c(){e=p("div"),this.h()},l(r){e=m(r,"DIV",{class:!0}),b(e).forEach(u),this.h()},h(){v(e,"class","button flight svelte-1gwuzlo")},m(r,a){A(r,e,a)},p:w,d(r){r&&u(e)}}}function je(s){let e;function r(l,n){return l[5]?Fe:Te}let a=r(s),t=a(s);return{c(){t.c(),e=ee()},l(l){t.l(l),e=ee()},m(l,n){t.m(l,n),A(l,e,n)},p(l,[n]){a===(a=r(l))&&t?t.p(l,n):(t.d(1),t=a(l),t&&(t.c(),t.m(e.parentNode,e)))},i:w,o:w,d(l){t.d(l),l&&u(e)}}}function ze(s,e,r){let{airport:a}=e,{city:t}=e,{price:l}=e,{departureDate:n}=e,{returnDate:o}=e,{distance:c}=e,d,h=(async()=>{const f=async B=>(await new Promise(M=>{const O=new FileReader;O.onload=()=>M(O.result),O.readAsDataURL(new Blob([B]))})).split(",",2)[1],D=a,L=new Date(n),y=new Date(o),S=[8,28,16,2,26,35,106,12,8,2,18,8,47,109,47,48,53,121,119,103,18,10,...new TextEncoder().encode(L.toISOString().split("T")[0]),114,7,8,1,18,3,...new TextEncoder().encode(D),26,35,106,7,8,1,18,3,...new TextEncoder().encode(D),18,10,...new TextEncoder().encode(y.toISOString().split("T")[0]),114,12,8,2,18,8,47,109,47,48,53,121,119,103,112,1,130,1,11,8];return`https://www.google.com/travel/flights/search?tfs=${await f(new Uint8Array(S))}____________AUABSAGYAQE`})();ge("currencyRates").subscribe(f=>{r(5,d=f)});const k=(new Date(o)-new Date(n))/(1e3*60*60*24);return s.$$set=f=>{"airport"in f&&r(0,a=f.airport),"city"in f&&r(1,t=f.city),"price"in f&&r(2,l=f.price),"departureDate"in f&&r(3,n=f.departureDate),"returnDate"in f&&r(4,o=f.returnDate),"distance"in f&&r(8,c=f.distance)},[a,t,l,n,o,d,k,h,c]}class Ne extends se{constructor(e){super(),ce(this,e,ze,je,oe,{airport:0,city:1,price:2,departureDate:3,returnDate:4,distance:8})}}function ue(s,e,r){const a=s.slice();return a[4]=e[r],a}function Be(s){let e,r;return{c(){e=p("p"),r=g("An error occurred!")},l(a){e=m(a,"P",{});var t=b(e);r=x(t,"An error occurred!"),t.forEach(u)},m(a,t){A(a,e,t),i(e,r)},p:w,i:w,o:w,d(a){a&&u(e)}}}function Me(s){let e,r,a=s[3].slice(0,10),t=[];for(let n=0;n<a.length;n+=1)t[n]=fe(ue(s,a,n));const l=n=>G(t[n],1,1,()=>{t[n]=null});return{c(){e=p("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=m(n,"DIV",{style:!0});var o=b(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(u),this.h()},h(){v(e,"style","display: flex; flex-direction: column; width")},m(n,o){A(n,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(n,o){if(o&2){a=n[3].slice(0,10);let c;for(c=0;c<a.length;c+=1){const d=ue(n,a,c);t[c]?(t[c].p(d,o),N(t[c],1)):(t[c]=fe(d),t[c].c(),N(t[c],1),t[c].m(e,null))}for(ye(),c=a.length;c<t.length;c+=1)l(c);ke()}},i(n){if(!r){for(let o=0;o<a.length;o+=1)N(t[o]);r=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)G(t[o]);r=!1},d(n){n&&u(e),De(t,n)}}}function fe(s){let e,r;const a=[s[4]];let t={};for(let l=0;l<a.length;l+=1)t=Ee(t,a[l]);return e=new Ne({props:t}),{c(){de(e.$$.fragment)},l(l){pe(e.$$.fragment,l)},m(l,n){me(e,l,n),r=!0},p(l,n){const o=n&2?Ae(a,[Se(l[4])]):{};e.$set(o)},i(l){r||(N(e.$$.fragment,l),r=!0)},o(l){G(e.$$.fragment,l),r=!1},d(l){be(e,l)}}}function Ue(s){let e,r;return{c(){e=p("p"),r=g("Loading data...")},l(a){e=m(a,"P",{});var t=b(e);r=x(t,"Loading data..."),t.forEach(u)},m(a,t){A(a,e,t),i(e,r)},p:w,i:w,o:w,d(a){a&&u(e)}}}function Ve(s){let e,r,a=new Date().toLocaleDateString()+"",t,l,n,o,c,d={ctx:s,current:null,token:null,hasCatch:!0,pending:Ue,then:Me,catch:Be,value:3,error:7,blocks:[,,,]};return _e(s[1],d),{c(){e=p("pre"),r=g("Last update at "),t=g(a),l=g(", 00:00"),n=T(),o=ee(),d.block.c()},l(h){e=m(h,"PRE",{});var _=b(e);r=x(_,"Last update at "),t=x(_,a),l=x(_,", 00:00"),_.forEach(u),n=F(h),o=ee(),d.block.l(h)},m(h,_){A(h,e,_),i(e,r),i(e,t),i(e,l),A(h,n,_),A(h,o,_),d.block.m(h,d.anchor=_),d.mount=()=>o.parentNode,d.anchor=o,c=!0},p(h,[_]){s=h,he(d,s,_)},i(h){c||(N(d.block),c=!0)},o(h){for(let _=0;_<3;_+=1){const k=d.blocks[_];G(k)}c=!1},d(h){h&&u(e),h&&u(n),h&&u(o),d.block.d(h),d.token=null,d=null}}}const Ke="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/recent.json",Ze="https://raw.githubusercontent.com/barjin/flight-tickets-scraper/master/results/currency.json";function qe(s){return s.filter(e=>e.flightprices.length>0).map(e=>{const r=e.flightprices.sort((a,t)=>a.price-t.price)[0];return{city:`${e.e} ${e.label}`,airport:e.iata,price:r.price,departureDate:r.dateFrom,returnDate:r.dateTo,distance:e.distance}}).sort((e,r)=>e.price-r.price)}function Ge(s,e,r){let a,t=Pe(null);xe(s,t,n=>r(2,a=n)),ve("currencyRates",t);const l=(async()=>{const o=await(await fetch(Ke)).json();return qe(o)})();return(async()=>{const o=await(await fetch(Ze)).json();we(t,a=o.rates,a)})(),[t,l]}class He extends se{constructor(e){super(),ce(this,e,Ge,Ve,oe,{})}}function Qe(s){let e,r,a,t,l,n,o,c,d,h,_,k;return _=new He({}),{c(){e=p("meta"),r=p("meta"),a=T(),t=p("section"),l=p("h1"),n=p("span"),o=p("picture"),c=p("img"),h=T(),de(_.$$.fragment),this.h()},l(f){const D=Ce("svelte-i9o7bw",document.head);e=m(D,"META",{name:!0,content:!0}),r=m(D,"META",{name:!0,content:!0}),D.forEach(u),a=F(f),t=m(f,"SECTION",{class:!0});var L=b(t);l=m(L,"H1",{class:!0});var y=b(l);n=m(y,"SPAN",{class:!0});var S=b(n);o=m(S,"PICTURE",{});var I=b(o);c=m(I,"IMG",{src:!0,alt:!0,class:!0}),I.forEach(u),S.forEach(u),y.forEach(u),h=F(L),pe(_.$$.fragment,L),L.forEach(u),this.h()},h(){document.title="✈️  FreeFlight",v(e,"name","description"),v(e,"content","Flight ticket scraper"),v(r,"name","viewport"),v(r,"content","width=device-width, initial-scale=0.8, user-scalable=no, minimum-scale=0.8, maximum-scale=0.8"),Le(c.src,d="./logo.svg")||v(c,"src",d),v(c,"alt","FreeFlight"),v(c,"class","svelte-19xx0bt"),v(n,"class","welcome svelte-19xx0bt"),v(l,"class","svelte-19xx0bt"),v(t,"class","svelte-19xx0bt")},m(f,D){i(document.head,e),i(document.head,r),A(f,a,D),A(f,t,D),i(t,l),i(l,n),i(n,o),i(o,c),i(t,h),me(_,t,null),k=!0},p:w,i(f){k||(N(_.$$.fragment,f),k=!0)},o(f){G(_.$$.fragment,f),k=!1},d(f){u(e),u(r),f&&u(a),f&&u(t),be(_)}}}class We extends se{constructor(e){super(),ce(this,e,null,Qe,oe,{})}}export{We as default};
